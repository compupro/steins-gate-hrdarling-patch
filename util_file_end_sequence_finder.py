#This horrendously written program prints out file endings for use in encoding.tbl
#It's probably only needs to be run once in the entire project anyway,
#so being written well isn't really that important, just that it works.

from os import listdir, getcwd
from os.path import isfile, join
from binascii import hexlify

endings = '''254B254F3033300090A2000000000000000000000000000000=<FILEEND00>
254B25500090909091010000000000000000000000000000=<FILEEND01>
254B25500090909079000000000000000000000000000000=<FILEEND02>
254B2550009090902B010000000000000000000000000000=<FILEEND03>
254B2550009090902B010000000000000000000000000000=<FILEEND04>
254B25500090909028010000000000000000000000000000=<FILEEND05>
254B255000909090F1000000000000000000000000000000=<FILEEND06>
254B2550009090903F010000000000000000000000000000=<FILEEND07>
254B2550009090905E000000000000000000000000000000=<FILEEND08>
254B255000909090A3000000000000000000000000000000=<FILEEND09>
254B25500090909086010000000000000000000000000000=<FILEEND0A>
254B255000909090B3000000000000000000000000000000=<FILEEND0B>
254B255000909090E9010000000000000000000000000000=<FILEEND0C>
254B255000909090F6000000000000000000000000000000=<FILEEND0D>
254B25500090909099000000000000000000000000000000=<FILEEND0E>
254B255000909090DE000000000000000000000000000000=<FILEEND0F>
254B25500090909054000000000000000000000000000000=<FILEEND10>
254B25500090909067000000000000000000000000000000=<FILEEND11>
254B2550009090903B000000000000000000000000000000=<FILEEND12>
254B25500090909055000000000000000000000000000000=<FILEEND13>
254B255000909090ED000000000000000000000000000000=<FILEEND14>
254B25500090909035000000000000000000000000000000=<FILEEND15>
254B25500090909081000000000000000000000000000000=<FILEEND16>
254B25500090909035000000000000000000000000000000=<FILEEND17>
254B255000909090BD000000000000000000000000000000=<FILEEND18>
254B255000909090C3000000000000000000000000000000=<FILEEND19>
254B2550009090905D000000000000000000000000000000=<FILEEND1A>
254B25500090909081000000000000000000000000000000=<FILEEND1B>
254B25500090909026010000000000000000000000000000=<FILEEND1C>
254B2550009090908E000000000000000000000000000000=<FILEEND1D>
254B25500090909065000000000000000000000000000000=<FILEEND1E>
254B25500090909047000000000000000000000000000000=<FILEEND1F>
254B2550009090900F020000000000000000000000000000=<FILEEND20>
254B2550009090909B000000000000000000000000000000=<FILEEND21>
254B25500090909000000000000000000000000000000000=<FILEEND22>
254B25500090909009000000000000000000000000000000=<FILEEND23>
254B2550009090906B000000000000000000000000000000=<FILEEND24>
254B255000909000010000000000000000000000000000=<FILEEND25>
254B25500090902A000000000000000000000000000000=<FILEEND26>
254B255000909096010000000000000000000000000000=<FILEEND27>
254B2550009090CC000000000000000000000000000000=<FILEEND28>
254B2550009090E9000000000000000000000000000000=<FILEEND29>
254B255000909062000000000000000000000000000000=<FILEEND2A>
254B255000909048010000000000000000000000000000=<FILEEND2B>
254B25500090909D000000000000000000000000000000=<FILEEND2C>
254B255000909093000000000000000000000000000000=<FILEEND2D>
254B25500090908A000000000000000000000000000000=<FILEEND2E>
254B255000909042010000000000000000000000000000=<FILEEND2F>
254B2550009090B2000000000000000000000000000000=<FILEEND30>
254B2550009090B8000000000000000000000000000000=<FILEEND31>
254B255000909064000000000000000000000000000000=<FILEEND32>
254B2550009090B6000000000000000000000000000000=<FILEEND33>
254B25500090907A000000000000000000000000000000=<FILEEND34>
254B25500090904A000000000000000000000000000000=<FILEEND35>
254B255000909090000000000000000000000000000000=<FILEEND36>
254B2550009090C1000000000000000000000000000000=<FILEEND37>
254B25500090902B010000000000000000000000000000=<FILEEND38>
254B255000909033010000000000000000000000000000=<FILEEND39>
254B255000909070000000000000000000000000000000=<FILEEND3A>
254B255000909017010000000000000000000000000000=<FILEEND3B>
254B25500090901A010000000000000000000000000000=<FILEEND3C>
254B255000909090000000000000000000000000000000=<FILEEND3D>
254B2550009090BE000000000000000000000000000000=<FILEEND3E>
254B2550009090BC000000000000000000000000000000=<FILEEND3F>
254B2550009090B6000000000000000000000000000000=<FILEEND40>
254B255000909000000000000000000000000000000000=<FILEEND41>
254B25500090F1000000000000000000000000000000=<FILEEND42>
254B2550009024010000000000000000000000000000=<FILEEND43>
254B2550009089000000000000000000000000000000=<FILEEND44>
254B2550009023000000000000000000000000000000=<FILEEND45>
254B25500090A1000000000000000000000000000000=<FILEEND46>
254B2550009007010000000000000000000000000000=<FILEEND47>
254B255000909A000000000000000000000000000000=<FILEEND48>
254B2550009079000000000000000000000000000000=<FILEEND49>
254B25500090AA010000000000000000000000000000=<FILEEND4A>
254B2550009044000000000000000000000000000000=<FILEEND4B>
254B25500090AD000000000000000000000000000000=<FILEEND4C>
254B2550009078000000000000000000000000000000=<FILEEND4D>
254B25500090DA000000000000000000000000000000=<FILEEND4E>
254B25500090F5000000000000000000000000000000=<FILEEND4F>
254B2550009021000000000000000000000000000000=<FILEEND50>
254B2550009093000000000000000000000000000000=<FILEEND51>
254B2550009081000000000000000000000000000000=<FILEEND52>
254B255000901A010000000000000000000000000000=<FILEEND53>
254B2550009093000000000000000000000000000000=<FILEEND54>
254B25500090B8000000000000000000000000000000=<FILEEND55>
254B2550009087000000000000000000000000000000=<FILEEND56>
254B25500090CD000000000000000000000000000000=<FILEEND57>
254B25500090AB000000000000000000000000000000=<FILEEND58>
254B2550009075000000000000000000000000000000=<FILEEND59>
254B255000908D000000000000000000000000000000=<FILEEND5A>
254B25500090EB000000000000000000000000000000=<FILEEND5B>
254B2550009067010000000000000000000000000000=<FILEEND5C>
254B25500090C3000000000000000000000000000000=<FILEEND5D>
254B2550009071000000000000000000000000000000=<FILEEND5E>
254B2550009045000000000000000000000000000000=<FILEEND5F>
254B25500090BD000000000000000000000000000000=<FILEEND60>
254B2550009007000000000000000000000000000000=<FILEEND61>
254B255000904D010000000000000000000000000000=<FILEEND62>
254B2550009015010000000000000000000000000000=<FILEEND63>
254B2550009078010000000000000000000000000000=<FILEEND64>
254B2550009053000000000000000000000000000000=<FILEEND65>
254B25500090D7000000000000000000000000000000=<FILEEND66>
254B25500090D1000000000000000000000000000000=<FILEEND67>
254B255000900D000000000000000000000000000000=<FILEEND68>
254B2550009000000000000000000000000000000000=<FILEEND69>
254B255000901F010000000000000000000000000000=<FILEEND6S>
254B2550009082000000000000000000000000000000=<FILEEND6B>
254B255000A4010000000000000000000000000000=<FILEEND6C>
254B255000AE000000000000000000000000000000=<FILEEND6D>
254B255000AC000000000000000000000000000000=<FILEEND6E>
254B25500004020000000000000000000000000000=<FILEEND6F>
254B255000AA000000000000000000000000000000=<FILEEND70>
254B2550008E000000000000000000000000000000=<FILEEND71>
254B2550009A000000000000000000000000000000=<FILEEND72>
254B255000D8010000000000000000000000000000=<FILEEND73>
254B25500084000000000000000000000000000000=<FILEEND74>
254B2550002A010000000000000000000000000000=<FILEEND75>
254B255000E0000000000000000000000000000000=<FILEEND76>
254B25500072000000000000000000000000000000=<FILEEND77>
254B2550009C000000000000000000000000000000=<FILEEND78>
254B2550006A000000000000000000000000000000=<FILEEND79>
254B25500074000000000000000000000000000000=<FILEEND7A>
254B2550007E000000000000000000000000000000=<FILEEND7B>
254B25500048000000000000000000000000000000=<FILEEND7C>
254B25500092000000000000000000000000000000=<FILEEND7D>
254B25500076000000000000000000000000000000=<FILEEND7E>
254B2550007A000000000000000000000000000000=<FILEEND7F>
254B255000D4000000000000000000000000000000=<FILEEND80>
254B255000A0000000000000000000000000000000=<FILEEND81>
254B25500034000000000000000000000000000000=<FILEEND82>
254B25500084000000000000000000000000000000=<FILEEND83>
254B2550002C000000000000000000000000000000=<FILEEND84>
254B25500042000000000000000000000000000000=<FILEEND85>
254B25500058000000000000000000000000000000=<FILEEND86>
254B25500090000000000000000000000000000000=<FILEEND87>
254B25500048010000000000000000000000000000=<FILEEND88>
254B25500090000000000000000000000000000000=<FILEEND89>
254B2550002C000000000000000000000000000000=<FILEEND8A>
254B2550005C000000000000000000000000000000=<FILEEND8B>
254B25500030000000000000000000000000000000=<FILEEND8C>
254B25500050000000000000000000000000000000=<FILEEND8D>
254B25500056000000000000000000000000000000=<FILEEND8E>
254B25500048000000000000000000000000000000=<FILEEND8F>
254B255000D5000000000000000000000000000000=<FILEEND90>
254B25500082000000000000000000000000000000=<FILEEND91>
254B255000A2000000000000000000000000000000=<FILEEND92>
254B25500079000000000000000000000000000000=<FILEEND93>
254B2550007C000000000000000000000000000000=<FILEEND94>
254B2550000A010000000000000000000000000000=<FILEEND95>
254B255000AB000000000000000000000000000000=<FILEEND96>
254B25500006000000000000000000000000000000=<FILEEND97>
254B25500078000000000000000000000000000000=<FILEEND98>
254B2550002D020000000000000000000000000000=<FILEEND99>
254B25500010000000000000000000000000000000=<FILEEND9A>
254B25500000000000000000000000000000000000=<FILEEND9B>
0090909092010000000000000000000000000000=<FILEEND9C>
0090909057000000000000000000000000000000=<FILEEND9D>
009090906E000000000000000000000000000000=<FILEEND9E>
009090901A010000000000000000000000000000=<FILEEND9F>
0090909000000000000000000000000000000000=<FILEENDA0>
0090909D000000000000000000000000000000=<FILEENDA1>
00909077000000000000000000000000000000=<FILEENDA2>
0090904C010000000000000000000000000000=<FILEENDA3>
009090A1000000000000000000000000000000=<FILEENDA4>
00909069000000000000000000000000000000=<FILEENDA5>
009090D2000000000000000000000000000000=<FILEENDA6>
00909007010000000000000000000000000000=<FILEENDA7>
00909027010000000000000000000000000000=<FILEENDA8>
00909000000000000000000000000000000000=<FILEENDA9>
009053010000000000000000000000000000=<FILEENDAA>
009054000000000000000000000000000000=<FILEENDAB>
009063010000000000000000000000000000=<FILEENDAC>
009084010000000000000000000000000000=<FILEENDAD>
009087000000000000000000000000000000=<FILEENDAE>
009000000000000000000000000000000000=<FILEENDAF>
0045010000000000000000000000000000=<FILEENDB0>
009E000000000000000000000000000000=<FILEENDB1>
0029010000000000000000000000000000=<FILEENDB2>
0055000000000000000000000000000000=<FILEENDB3>
00E7000000000000000000000000000000=<FILEENDB4>
003B000000000000000000000000000000=<FILEENDB5>
0000000000000000000000000000000000=<FILEENDB6>'''
endings = [x for x in endings.split('\n')]

path = getcwd() + '\\original-data'
pathfiles = [path + '\\' + f for f in listdir(path) if isfile(join(path, f))]
file_ending_pairs = {}
for filename in pathfiles:
    with open(filename, 'rb') as f:
        data = f.read()
        standard_end = False
        for ending in endings:
            if (str(hexlify(data))[2:-1]).endswith(ending[:ending.find('=')].lower()):
                standard_end = ending[:ending.find('=')].lower()
        if standard_end:
            data = "aa" + standard_end + "a"
        else:
            index = data.rfind(b'\x25\x4b\x25\x50')
            if index != -1:
                data = hexlify(data[index:])
            else:
                index = data.rfind(b'\x00\x90')
                if index != -1:
                    data = hexlify(data[index:])
                else:
                    continue
        print(filename[-6:] + ": " + str(data)[2:-1])
        file_ending_pairs[filename[-6:].replace('\\','')] = str(data)[2:-1].upper()
for x in [1,2,4,5,8,9,10,11,12]:
    if str(x)+".bin" in file_ending_pairs.keys():
        del file_ending_pairs[str(x)+".bin"]
new_endings = list(file_ending_pairs.values())
new_endings.sort(key=len, reverse=True)
counter = 0
atlas_list = []
for ending in new_endings:
    atlas_list.append(ending+"=<ENDING"+str(counter)+">")
    counter += 1
[print(x) for x in atlas_list]